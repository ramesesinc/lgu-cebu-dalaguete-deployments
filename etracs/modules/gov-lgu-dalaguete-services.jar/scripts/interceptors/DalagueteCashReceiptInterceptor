import com.rameses.annotations.*
import com.rameses.eserver.*;
import com.rameses.common.*;

class DalagueCashReceiptIterceptor {
	
	@After(pattern="CashReceiptService.open", eval="#{result.formno=='51'}", index=1000) 
	public void interceptOpen( evt ){
		def receipt = evt.result;
		receipt.checks = "";
		receipt.paymentitems.each{
			receipt.checks += it.refno + " " + it.bank + " " + it.refdate.toString().split(' ')[0] + "\n";
		}
		println 'Checks : ' + receipt.checks;
	}
	
	@After(pattern="CashReceiptService.post", eval="#{result.formno=='51'}", index=1000) 
	public void interceptPost( evt ){
		def receipt = evt.result;
		receipt.checks = "";
		receipt.paymentitems.each{
			receipt.checks += it.refno + " " + it.bank + " " + it.refdate.toString().split(' ')[0] + "\n";
		}
		println 'Checks : ' + receipt.checks;
	}
}